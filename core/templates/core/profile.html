{% extends 'base.html' %}
{% block title %}–ü—Ä–æ—Ñ–∏–ª—å | Flowvance{% endblock %}

{% block content %}
<h2 class="mb-4 text-center fw-bold">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>

<div class="card shadow-lg p-4 bg-white border-0 rounded-4">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- –ê–≤–∞—Ç–∞—Ä -->
        <div class="mb-4 text-center">
            {% if request.user.avatar %}
                <img src="{{ request.user.avatar.url }}" class="rounded-circle shadow" style="width: 150px; height: 150px; object-fit: cover;"><br>
                <div class="form-check d-inline-block mt-3">
                    <input class="form-check-input" type="checkbox" name="remove_avatar" id="remove_avatar">
                    <label class="form-check-label" for="remove_avatar">–£–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</label>
                </div>
            {% else %}
                <p class="text-muted">–ê–≤–∞—Ç–∞—Ä –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</p>
            {% endif %}
            <input type="file" name="avatar" accept="image/*" class="form-control mt-3 rounded-pill">
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label class="form-label fw-semibold">üìß Email</label>
            <input type="email" name="email" value="{{ request.user.email }}" class="form-control" readonly>
            <a href="{% url 'request_email_change' %}" class="btn btn-outline-secondary mt-2 btn-sm rounded-pill">‚úèÔ∏è –°–º–µ–Ω–∏—Ç—å –ø–æ—á—Ç—É</a>
        </div>

        <!-- –õ–æ–≥–∏–Ω -->
        <div class="mb-3">
            <label for="username" class="form-label fw-semibold">üÜî –õ–æ–≥–∏–Ω</label>
            <input type="text" name="username" id="username" class="form-control" value="{{ user.username }}">
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="form-check form-switch mb-4">
            <input class="form-check-input" type="checkbox" name="receive_notifications" id="receive_notifications" {% if user.receive_notifications %}checked{% endif %}>
            <label class="form-check-label" for="receive_notifications">üîî –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="d-flex flex-wrap gap-2">
            <button type="submit" class="btn btn-success rounded-pill px-4">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <a href="{% url 'password_reset' %}" class="btn btn-outline-warning rounded-pill">üîê –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</a>
        </div>
    </form>

    {% if messages %}
        <div class="mt-4">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} rounded-pill">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}
